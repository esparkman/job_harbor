<% content_for :header_actions do %>
  <%= form_with url: search_path, method: :get, class: "flex items-center gap-2" do |f| %>
    <%= f.text_field :q, placeholder: "Search jobs...", class: "select", style: "width: 16rem;", value: params[:q] %>
    <%= f.submit "Search", class: "btn btn-secondary btn-sm" %>
  <% end %>
<% end %>

<p class="text-sm text-muted-foreground mb-4">
  Found <%= @pagy.count %> results for "<%= params[:q] %>"
  <%= link_to "Clear search", jobs_path, class: "link ml-2" %>
</p>

<% if @jobs.empty? %>
  <%= render JobHarbor::EmptyStateComponent.new(
    title: "No results found",
    description: "Try a different search term or check your spelling.",
    icon: :search
  ) %>
<% else %>
  <div class="card">
    <div class="table-wrapper">
      <table class="sqd-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Job Class</th>
            <th>Queue</th>
            <th>Status</th>
            <th>Scheduled At</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% @jobs.each do |job| %>
            <%= render JobHarbor::JobRowComponent.new(job: job) %>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>

  <div class="mt-4">
    <%= render JobHarbor::PaginationComponent.new(pagy: @pagy) %>
  </div>
<% end %>
