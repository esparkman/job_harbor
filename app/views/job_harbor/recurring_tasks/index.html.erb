<% if @tasks.empty? %>
  <%= render JobHarbor::EmptyStateComponent.new(
    title: "No recurring tasks found",
    description: "Configure recurring tasks in config/recurring.yml to see them here.",
    icon: :recurring
  ) %>
<% else %>
  <div class="card">
    <div class="table-wrapper">
      <table class="sqd-table">
        <thead>
          <tr>
            <th>Key</th>
            <th>Job Class</th>
            <th>Schedule</th>
            <th>Queue</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% @tasks.each do |task| %>
            <tr>
              <td><%= link_to task.key, recurring_task_path(task), class: "link font-medium" %></td>
              <td><code class="text-sm font-mono"><%= task.class_name %></code></td>
              <td class="text-sm"><%= task.schedule %></td>
              <td class="text-sm"><%= task.queue_name || "default" %></td>
              <td>
                <%= button_to "Run Now", enqueue_now_recurring_task_path(task), method: :post, class: "btn btn-secondary btn-xs" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
<% end %>
